Here's a rewritten version of your Readme, aiming for clarity, professionalism, and an engaging approach:

---

# Hazel

Hazel explores the adaptation of [Datomic](https://www.datomic.com/) principles for frontend applications, presenting a peer library developed in JavaScript. This library facilitates efficient navigation of a [DataScript](https://github.com/tonsky/datascript/) database and enables browser-side caching of its data segments.

Ideal for productivity tools such as Asana, Jira, Slack, and Notion, Hazel is especially beneficial for applications with substantial browser-based databases requiring rapid queries without backend reliance. The project is developed using the React TodoMVC framework.

## Key Features

- **Lazy Database Iteration**: Efficiently fetch database segments from the backend only as needed.
- **Robust Caching**: Persistently store segments within the browser cache for long-term usage.
- **Consistent Snapshots**: Retrieve stable snapshots of the database for reliable performance.

### Implementation Insight

In typical databases like PostgreSQL or MySQL, data resides on server disks with query processing handled server-side. Caching query results locally can often degrade this to simple key-value storage. In contrast, Hazel, inspired by Datomic-like systems, enables in-application query execution utilizing cached data.

For an in-depth understanding, refer to the [Datomic Introduction](https://docs.datomic.com/datomic-overview.html).

## How Hazel Works

Familiarity with DataScript or Datomic's data model is recommended. Key resources include:

- [Information Model](https://docs.datomic.com/datomic-overview.html#information-model)
- [Indexes](https://docs.datomic.com/datomic-overview.html#indexes)

DataScript represents data through "datoms" — triples of [entity, attribute, value] (E, A, V), stored in indices like EAV, AEV, and AVE. Although DataScript includes a Transaction ID (T), Hazel does not utilize this component. Each index manifests as a persistent B+ tree, with nodes functioning as storage segments serialized for storage.

### Transaction Handling

Database modifications occur via transactions — collections of datoms that indicate addition or removal states. Persistent data structures necessitate transaction-induced tree restructuring. However, DataScript optimizes this by maintaining a change tail, applying them once they equitably match tree node sizes.

Hazel supports segment traversal and change tail management, offering APIs reminiscent of low-level Datomic functions, like `seek-datoms` and `datoms`. These methods leverage JavaScript's AsyncGenerator for asynchronous execution, crucial for network-based node fetching.

## Architectural Elements

Hazel operates on the application's frontend, managing [DataScript](https://github.com/tonsky/datascript/) database segments generated during transaction processing. The database employs three primary indices: EAV, AEV, and VAE. These indices, structured as B+ trees, consist of:

- **Branch Nodes**: Contain ordered sequences of keys and node addresses, facilitating tree navigation.
- **Leaf Nodes**: Hold ordered sequences of datoms.

For further technical details, see:
- [Persistent Sorted Set Documentation](https://github.com/tonsky/persistent-sorted-set#durability)
- [Datomic's Data Model](https://docs.datomic.com/whatis/data-model.html#datalog)

## Limitations

Hazel presently implements the methods (r)seek and datoms across indices. A significant challenge is access control. For example, projects like Asana have tasks and collaborators; granting access to a single task requires careful database control. Two potential solutions include:

1. Backend query execution APIs ensuring access control but compromising caching benefits.
2. Task replication across multiple databases to enforce project-specific access.

Feedback or contribution ideas? Please open an issue on this repository.

## Future Directions

Potential enhancements may include implementing [datalog](https://docs.datomic.com/query/query-executing.html) and additional Datomic/DataScript APIs. Furthermore, adopting a local-first paradigm with Conflict-free Replicated Data Types (CRDT) could be explored by executing JavaScript-implemented database functions optimistically on the frontend.

## How to Run

Execute the following to launch the application:
```bash
docker build -t hazel . && docker run --rm -p 8080:8080 hazel
```
Access the application at [http://localhost:8080](http://localhost:8080).

## Development

To run tests, use:
```bash
bun run test
```

Note: Bun builder is currently in beta, with limitations including:
- Limited file reload when using `build.js` for configuration.
- Lack of automatic `manifest.json` generation.

---

This revised Readme maintains a balance between technical depth and clarity, striving to engage both developers and stakeholders by conveying the project's value proposition effectively.
